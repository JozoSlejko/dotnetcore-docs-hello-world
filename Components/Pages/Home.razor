@code {
    private const int maxAttempts = 12;
    private const int delayMs = 250;
    private string emailAddress;

    protected override async Task OnInitializedAsync()
    {
        await RetryAuthMeAsync();
    }

    private async Task RetryAuthMeAsync()
    {
        for (int attempt = 1; attempt <= maxAttempts; attempt++)
        {
            var response = await Http.GetAsync("/.auth/me");
            if (response.IsSuccessStatusCode)
            {
                emailAddress = await response.Content.ReadAsStringAsync();
                break;
            }
            await Task.Delay(delayMs);
        }
    }
}